<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>table2</title>
  <style>
    td {
      padding: 10px;
      text-align: center;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <table id="table"></table>
  <div id="total"></div>
  <script>
    var products = [
      {name: 'product1', price: 100, quantity: 4},
      {name: 'product2', price: 200, quantity: 5},
      {name: 'product3', price: 300, quantity: 6},
      {name: 'product1', price: 100, quantity: 4},
      {name: 'product2', price: 200, quantity: 3},
      {name: 'product3', price: 300, quantity: 2}
  ];

    var table = document.querySelector('#table');
    var total = document.querySelector('#total');

    createTable(products, table);
    setText(total, getCostArray(table));

    function setText(elem, text) {
      elem.innerHTML += ' ' + text;
    }

    function createTable(arr, table) {
      for (var i = 0; i < products.length; i++) {
        var tr = document.createElement('tr');

        fillTable(tr,products[i].name);
        fillTable(tr,products[i].price);
        fillTable(tr,products[i].quantity);
        fillTable(tr, products[i].price * products[i].quantity, 'cost');

        table.appendChild(tr);
      }
    }

    function fillTable(parent, text, className) {
      var td = document.createElement('td');
      td.innerHTML = text;
      parent.appendChild(td);

      if (className !== undefined) {
        td.classList.add(className);
      }
    }

    function getCostArray(table) {
      var sum = 0;
      var tdCost = table.querySelectorAll('.cost');
      for (var i = 0; i < tdCost.length; i++) {
        sum += Number(tdCost[i].innerHTML);
      }
      return sum;
    }

    function calculateSum(products) {
      var sum = 0;
      for (var i = 0; i < products.length; i++) {
        sum += products[i].price * products[i].quantity;
      }
      return sum;
    };
  </script>
</body>
</html>